title: event
toc: false
date: 2016-11-11 14:39:38
tags:
categories:
  - web前端
---

js事件
<!-- more -->
# 通用
### 创建事件
```javascript
export function triggerHTMLEvents (target, event, process) {
  const e = document.createEvent('HTMLEvents')
  e.initEvent(event, true, true)
  if (process) process(e)
  target.dispatchEvent(e)
  return e
}
export function triggerMouseEvents (target, event, process) {
  const e = document.createEvent('MouseEvents')
  e.initEvent(event, true, true)
  if (process) process(e)
  target.dispatchEvent(e)
  return e
}
export function triggerUIEvents (target, event, process) {
  const e = document.createEvent('UIEvents')
  e.initEvent(event, true, true)
  if (process) process(e)
  target.dispatchEvent(e)
  return e
}
```
# MouseEvents
click事件

dbclick事件

mouseover事件（冒泡）

mouseout事件（冒泡）

mousedown事件

mouseup事件

contextmenu事件

mouseenter事件（不冒泡）

mouseleave事件（不冒泡）

mousewheel事件（FF DOMMouseScroll事件、DOM3 wheel事件）
# HTMLEvents
blur、change、resize focus
### 搜索
- 延迟搜索以及置空
```
self.searchValueChange = ko.computed(function () {
    var searchValue = self.searchValue();
    if(self.searchUsersTimeoutFlag != null) {
        clearTimeout(self.searchUsersTimeoutFlag)
    }
    if($.trim(searchValue)==''){
        self.searchUsers([]);
        return
    }

    self.searchUsersTimeoutFlag = setTimeout(function() {
        if(searchValue == '') {
            self.searchUsers([]);
            return
        }
        service.getUserList(searchValue,'',function (data) {
            if(data.success){
                var tempdata=data.data;
                for(var index in tempdata){
                    var temp=tempdata[index];
                    temp.iconUrl="http://cs.101.com/v0.1/static/cscommon/avatar/"+temp.uid+"/"+temp.uid+".jpg?size=80";
                    tempdata[index]=temp;
                }
                self.searchUsers(tempdata);
            }
        });
    }, 400)
});
```
# MutationEvents（通用的突变事件）
文档中的某个元素被移除了，就会触发突变事件中的DOMNodeRemovedFromDocument事件
# UIEvents（通用的UI事件），鼠标事件键盘事件都继承自UI事件
keydown事件

keyup事件

keypress事件
triggerUIEvents(target, 'keyup')

# 参考

http://www.jianshu.com/p/418e9e35d5a1
