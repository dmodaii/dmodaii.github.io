title: js-RegExp
toc: false
date: 2016-08-15 22:20:06
tags:
  - RegExp
categories:
  - web前端
---
exec和match
<!-- more -->

# exec和match区别
- exec是RegExp对象方法，match是String对象方法；

- 如果没有找到结果，则二者都返回null；

- 只有在正则表达式必须指定全局g属性时，match才能返回所有匹配，否则match与exec方法结果无差异，是等价的；

- exec永远返回与第一个匹配相关的信息，其返回数组第一个值是第一个匹配的字串，剩下的是所有分组的反向引用（即子括号的匹配内容）；

- exec在设置g属性后，虽然匹配结果不受g的影响，返回结果仍然是一个数组（第一个值是第一个匹配到的字符串，以后的为分组匹配内容），但是会改变index和lastIndex等的值，将该对象的匹配的开始位置设置到紧接这匹配子串的字符位置，当第二次调用exec时，将从lastIndex所指示的字符位置开始检索。同样match方法在设置了g属性后，也会改变index和lastIndex的值，但是是一次性的。无法像exec那样能逐过程累积（即将结果放入Matches 集合中去了），因此无法累积获取下一次检索的位置。
index 属性声明的是匹配文本的第一个字符的位置, lastIndex 属性设置为匹配文本的最后一个字符的下一个位置

- 重要事项：如果在一个字符串中完成了一次模式匹配之后要开始检索新的字符串，就必须手动地把 lastIndex 属性重置为 0。（不然从上次的位置lastIndex开始）
提示：请注意，无论 RegExpObject 是否是全局模式，exec() 都会把完整的细节添加到它返回的数组中。这就是 exec() 与 String.match() 的不同之处，后者在全局模式下返回的信息要少得多。因此我们可以这么说，在循环中反复地调用 exec() 方法是唯一一种获得全局模式的完整模式匹配信息的方法。

# 示例
```javascript
var src = "The rain in Spain falls mainly in the plain.";
var re = /\w+/g; //有g属性。
var i = 0;
while (i++<10){
    arr = src.match(re);
    document.write(RegExp.index + "-" + RegExp.lastIndex + "\t" + arr + "<br/>");

}


//结果如下：

// 38-43 The,rain,in,Spain,falls,mainly,in,the,plain
// 38-43 The,rain,in,Spain,falls,mainly,in,the,plain
// 38-43 The,rain,in,Spain,falls,mainly,in,the,plain
// 38-43 The,rain,in,Spain,falls,mainly,in,the,plain
// 38-43 The,rain,in,Spain,falls,mainly,in,the,plain
// 38-43 The,rain,in,Spain,falls,mainly,in,the,plain
// 38-43 The,rain,in,Spain,falls,mainly,in,the,plain
// 38-43 The,rain,in,Spain,falls,mainly,in,the,plain
// 38-43 The,rain,in,Spain,falls,mainly,in,the,plain
// 38-43 The,rain,in,Spain,falls,mainly,in,the,plain

var src = "The rain in Spain falls mainly in the plain.";
var re = /\w+/; // 无g属性。
var i = 0;
while (i++<10){
    arr = src.match(re);
    document.write(RegExp.index + "-" + RegExp.lastIndex + "\t" + arr + "<br/>");

}
//结果如下：

// 0-3 The
// 0-3 The
// 0-3 The
// 0-3 The
// 0-3 The
// 0-3 The
// 0-3 The
// 0-3 The
// 0-3 The
// 0-3 The

var src = "The rain in Spain falls mainly in the plain.";
var re = /(\w+)/g; // 创建正则表达式模式。
var arr;
while ((arr = re.exec(src)) != null){
 document.write(arr.index + "-" + re.lastIndex + "\t" + arr[0] + "<br/>");
 //此处RegExp.lastIndex和arr.lastIndex均有同样的属性，可以互换。在此注意IE6和7的lastIndex重设置0的bug
}

// 0-3	The
// 4-8	rain
// 9-11	in
// 12-17	Spain
// 18-23	falls
// 24-30	mainly
// 31-33	in
// 34-37	the
// 38-43	plain
```
